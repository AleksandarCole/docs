
* [Overview](#overview)
* [Properties](#properties)
   * [apiVersion](#apiversion)
   * [kind](#kind)
   * [metadata](#metadata)
      * [name](#name-in-metadata)
      * [title](#title-in-metadata)
      * [id](#id)
      * [create_time](#create_time)
      * [update_time](#update_time)
   * [spec](#spec)
      * [widgets](#widgets)
         * [name](#name-in-widgets)
         * [type](#type)
         * [filters](#filters)
            - [project_id](#project_id)
            - [branch](#branch)
            - [github_uid](#github_uid)
            - [pipeline_file](#pipeline_file)
* [Example](#example)
* [See also](#see-also)

## Overview

This document is the official reference of the Dashboard YAML grammar used for
defining `dashboards` in Semaphore 2.0.

A Semaphore 2.0 `Dashboard` is a place when you can keep the `widgets` that you
define in order to overview the operations that take place under the current
Semaphore 2.0 organization.

A `widget` is used for watching the activity of pipelines and workflows
according to certain criteria that are defined using filters that help you
narrow down the displayed information.

Each dashboard is associated to a given organization. Therefore, in order to
view a specific dashboard you should be connected to the organization the
dashboard belongs to.

## Properties

### apiVersion

The `apiVersion` property specifies the API version of the Dashboard YAML
grammar that will be used in the current document. Different versions might
have different features.

The list of valid values for `apiVersion`: `v1alpha`.

### kind

The `kind` property defines the purpose of the YAML file. For a YAML file that
will be used for defining a Dashboard, the value of the `kind` property should
be `Dashboard`.

The list of valid values for `kind`: `Dashboard`.

### metadata

The `metadata` property defines the metadata of the Dashboard YAML file.
The list of supported properties includes `name`, `title`, `id`,
`create_time` and `update_time` but this might change in future versions.

#### name in metadata

The `name` property holds the name of the dashboard as it will appear on the
URL of the dashboard and should be unique among the dashboards of an
organization.

The value of `value` should contain lowercase letters, dashes and numbers only.

#### title in metadata

The `title` property holds the title of the Dashboard as it will appear on the
UI of Semaphore 2.0.

#### id

The value of the `id` property is automatically generated by Semaphore 2.0 and
is unique among all dashboards. It should not be changed by the user.

#### create_time

The value of the `create_time` property is automatically generated by Semaphore
2.0 and is in the UNIX epoch format.

#### update_time

The value of the `update_time` property is automatically generated by Semaphore
2.0 and is in the UNIX epoch format.

### spec

The `spec` property is used for holding the list of widgets your dashboard will
have.

#### widgets

Each Dashboard is a place for creating Widgets, which define the actual
information that is displayed on screen, which is the purpose of the `widget`
property.

##### name in widgets

The `name` property used in the items of the `widgets` list defines the name of
each `widget` as it will appear on the UI of Semaphore 2.0.

##### type

The value of `type` defines whether you want your widget to display information
about pipelines or workflows.

The list of valid values for `type`: `list_workflows` and `list_pipelines`.

##### filters

The `filters` property holds a list of items that can help you filter the
output to match certain criteria.

Notice that the `filters` property is compulsory when used with a
`list_pipelines` widget type and optional when used with a `list_workflows`
widget type.

If you are using a `list_worflows` type and you have no filters, the value of
`filters` should be `filters: {}`.

###### project_id

The `project_id` property is compulsory for the `list_pipelines` type of
widgets and optional for the `list_worflows` type of widgets.

You can find the project ID of a Semaphore 2.0 project with the help of the
`sem get projects <name>` command.

###### branch

The `branch` property allows to filter the output by the name of the branch of
the GitHub repository.

Note that the value of the `branch` property should be an exact match and that
there is currently no support for regular expressions.

###### github_uid

The `github_uid` property allows you to filter the result by GitHub username
and only be used with the `list_workflows` type.

There exist a special value of `github_uid`, which is `'{{gitgub_uid}}'` and is
automatically be expanded to the GitHub username of the current user.

###### pipeline_file

The `pipeline_file` property allows you to filter by the name of the pipeline
file as it appears on a pipeline YAML file. The value of the default pipeline
YAML is file `.semaphore/semaphore.yml`.

## Example

    apiVersion: v1alpha
    kind: Dashboard
    metadata:
      name: my-dashboard
      title: My Dashboard
      id: eb0cc2c7-bbc9-41e4-9e3d-2eb622a673fb
      create_time: "1537445699"
      update_time: "1537445713"
    spec:
      widgets:
      - name: Workflows
        type: list_pipelines
        filters:
          project_id: 7384612f-e22f-4710-9f0f-5dcce85ba44b
      - name: docs projects
        type: list_pipelines
        filters:
          project_id: 0dd982e8-32f5-4037-983e-4de01ac7fb1e
      - name: Using list_workflows
        type: list_workflows
        filters: {}
      - name: All projects on branch mt/sem-init
        type: list_workflows
        filters:
          branch: mt/sem-init

## See also

* [sem command line tool Reference](https://docs.semaphoreci.com/article/53-sem-reference)
